{"uid":"fe31408be6e0a153","name":"Validate Council Output -- @1.22 Testing : SouthTynesideCouncil","fullName":"Test each council output matches expected results in /outputs: Validate Council Output","historyId":"1d0a41061fe167623b361a9c30b0ed57","time":{"start":1669677344498,"stop":1669677346477,"duration":1979},"status":"broken","statusMessage":"KeyError: 'result'\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 57, in main\n    return client_code(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 23, in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/get_bin_data.py\", line 53, in template_method\n    bin_data_dict = self.parse_data(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 75, in parse_data\n    uprn = get_address_uprn(user_postcode, user_paon, api_url)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 31, in get_address_uprn\n    results = json_response[\"result\"]\n","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"KeyError: 'result'\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 57, in main\n    return client_code(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 23, in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/get_bin_data.py\", line 53, in template_method\n    bin_data_dict = self.parse_data(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 75, in parse_data\n    uprn = get_address_uprn(user_postcode, user_paon, api_url)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 31, in get_address_uprn\n    results = json_response[\"result\"]\n","steps":[{"name":"Given the council: \"SouthTynesideCouncil\"","time":{"start":1669677344499,"stop":1669677344499,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false},{"name":"When we scrape the data from \"SouthTynesideCouncil\"","time":{"start":1669677344500,"stop":1669677346476,"duration":1976},"status":"broken","statusMessage":"KeyError: 'result'\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.8/lib/python3.8/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 57, in main\n    return client_code(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 23, in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/get_bin_data.py\", line 53, in template_method\n    bin_data_dict = self.parse_data(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 75, in parse_data\n    uprn = get_address_uprn(user_postcode, user_paon, api_url)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 31, in get_address_uprn\n    results = json_response[\"result\"]\n","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":true,"stepsCount":0,"hasContent":true},{"name":"Then the result is valid json","time":{"start":1669677346476,"stop":1669677346476,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1669677346476,"stop":1669677346476,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":4,"hasContent":true},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"SouthTynesideCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":12,"skipped":0,"passed":0,"unknown":0,"total":12},"items":[{"uid":"437762c809fe71e6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/300//#testresult/437762c809fe71e6","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1669673773059,"stop":1669673774970,"duration":1911}},{"uid":"c2cafbb8f79a1f8c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/297//#testresult/c2cafbb8f79a1f8c","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1669600171528,"stop":1669600173193,"duration":1665}},{"uid":"a466ae20e511dde9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/296//#testresult/a466ae20e511dde9","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1669514288367,"stop":1669514290824,"duration":2457}},{"uid":"62eb09491d78ec11","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/295//#testresult/62eb09491d78ec11","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1669427322318,"stop":1669427325002,"duration":2684}},{"uid":"2fb615bdc64f23a1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/294//#testresult/2fb615bdc64f23a1","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1669341189830,"stop":1669341192197,"duration":2367}},{"uid":"77159edcc0ba2edb","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/293//#testresult/77159edcc0ba2edb","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1669254979022,"stop":1669254981606,"duration":2584}},{"uid":"d1c6f355a887b56a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/291//#testresult/d1c6f355a887b56a","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1669082689166,"stop":1669082691209,"duration":2043}},{"uid":"547d5625853af63","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/290//#testresult/547d5625853af63","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1668996182454,"stop":1668996184531,"duration":2077}},{"uid":"96f357781799e623","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/286//#testresult/96f357781799e623","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1668737263032,"stop":1668737265487,"duration":2455}},{"uid":"929dcda146995a8d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/284//#testresult/929dcda146995a8d","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1668564168350,"stop":1668564169990,"duration":1640}},{"uid":"ad098b80c67fa1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.8/283//#testresult/ad098b80c67fa1","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1668511484235,"stop":1668511486486,"duration":2251}}]},"tags":[]},"source":"fe31408be6e0a153.json","parameterValues":["SouthTynesideCouncil"]}