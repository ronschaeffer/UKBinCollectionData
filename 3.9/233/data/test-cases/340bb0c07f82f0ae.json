{"uid":"340bb0c07f82f0ae","name":"Validate Council Output -- @1.14 Testing : SouthTynesideCouncil","fullName":"Test each council output matches expected results in /outputs: Validate Council Output","historyId":"64416938c3ba684b88b72501016c8ad9","time":{"start":1665975274277,"stop":1665975277055,"duration":2778},"status":"broken","statusMessage":"KeyError: 'result'\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.9/lib/python3.9/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.9/lib/python3.9/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 57, in main\n    return client_code(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 23, in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/get_bin_data.py\", line 53, in template_method\n    bin_data_dict = self.parse_data(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 75, in parse_data\n    uprn = get_address_uprn(user_postcode, user_paon, api_url)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 31, in get_address_uprn\n    results = json_response[\"result\"]\n","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"broken","statusMessage":"KeyError: 'result'\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.9/lib/python3.9/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.9/lib/python3.9/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 57, in main\n    return client_code(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 23, in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/get_bin_data.py\", line 53, in template_method\n    bin_data_dict = self.parse_data(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 75, in parse_data\n    uprn = get_address_uprn(user_postcode, user_paon, api_url)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 31, in get_address_uprn\n    results = json_response[\"result\"]\n","steps":[{"name":"Given the council: \"SouthTynesideCouncil\"","time":{"start":1665975274277,"stop":1665975274278,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"When we scrape the data from \"SouthTynesideCouncil\"","time":{"start":1665975274278,"stop":1665975277055,"duration":2777},"status":"broken","statusMessage":"KeyError: 'result'\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.9/lib/python3.9/site-packages/behave/model.py\", line 1329, in run\n    match.run(runner.context)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.9/lib/python3.9/site-packages/behave/matchers.py\", line 98, in run\n    self.func(context, *args, **kwargs)\n  File \"uk_bin_collection/tests/features/steps/validate_council.py\", line 36, in step_impl\n    context.parse_result = collect_data.main(args)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 57, in main\n    return client_code(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/collect_data.py\", line 23, in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/get_bin_data.py\", line 53, in template_method\n    bin_data_dict = self.parse_data(\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 75, in parse_data\n    uprn = get_address_uprn(user_postcode, user_paon, api_url)\n  File \"/home/runner/work/UKBinCollectionData/UKBinCollectionData/uk_bin_collection/uk_bin_collection/councils/SouthTynesideCouncil.py\", line 31, in get_address_uprn\n    results = json_response[\"result\"]\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},{"name":"Then the result is valid json","time":{"start":1665975277055,"stop":1665975277055,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1665975277055,"stop":1665975277055,"duration":0},"status":"skipped","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"attachments":[],"parameters":[],"stepsCount":4,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"severity","value":"normal"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"framework","value":"behave"},{"name":"language","value":"cpython3"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"SouthTynesideCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":18,"skipped":0,"passed":0,"unknown":0,"total":18},"items":[{"uid":"52bbe82a1f06461f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/232//#testresult/52bbe82a1f06461f","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665888586191,"stop":1665888588426,"duration":2235}},{"uid":"59e35faa3e344c34","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/231//#testresult/59e35faa3e344c34","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665801965459,"stop":1665801968283,"duration":2824}},{"uid":"5a03376902ec9440","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/230//#testresult/5a03376902ec9440","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665715793786,"stop":1665715795968,"duration":2182}},{"uid":"37a99c07d6c5bb0a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/229//#testresult/37a99c07d6c5bb0a","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665628702681,"stop":1665628704785,"duration":2104}},{"uid":"e2853c21dc21875a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/228//#testresult/e2853c21dc21875a","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665542766448,"stop":1665542769222,"duration":2774}},{"uid":"5ae1c6a4b0f38de7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/227//#testresult/5ae1c6a4b0f38de7","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665455684021,"stop":1665455686520,"duration":2499}},{"uid":"b12a208458504baa","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/226//#testresult/b12a208458504baa","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665369476742,"stop":1665369478443,"duration":1701}},{"uid":"e1b589989a3b5ffd","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/225//#testresult/e1b589989a3b5ffd","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665283016051,"stop":1665283019180,"duration":3129}},{"uid":"b382bca06c16371e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/224//#testresult/b382bca06c16371e","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665195224947,"stop":1665195227563,"duration":2616}},{"uid":"381852dfcc1b7d60","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/223//#testresult/381852dfcc1b7d60","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665110135874,"stop":1665110138411,"duration":2537}},{"uid":"ec0f0338d6d01c8","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/222//#testresult/ec0f0338d6d01c8","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1665022966703,"stop":1665022968646,"duration":1943}},{"uid":"944cdb454b2b76e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/221//#testresult/944cdb454b2b76e","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1664936734668,"stop":1664936736353,"duration":1685}},{"uid":"e1a310a70c071b08","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/219//#testresult/e1a310a70c071b08","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1664763140373,"stop":1664763142038,"duration":1665}},{"uid":"cdf34f82593a98fd","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/218//#testresult/cdf34f82593a98fd","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1664678871326,"stop":1664678873404,"duration":2078}},{"uid":"25d3f92d16109d20","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/217//#testresult/25d3f92d16109d20","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1664592920062,"stop":1664592922340,"duration":2278}},{"uid":"e428ce5b2364833b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/216//#testresult/e428ce5b2364833b","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1664506680325,"stop":1664506682170,"duration":1845}},{"uid":"f424f24ee7ddd075","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.9/215//#testresult/f424f24ee7ddd075","status":"broken","statusDetails":"KeyError: 'result'\n","time":{"start":1664433829053,"stop":1664433831086,"duration":2033}}]},"tags":[]},"source":"340bb0c07f82f0ae.json","parameterValues":["SouthTynesideCouncil"]}